<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparative Medicine Database</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4 text-primary">
            <i class="fas fa-pills"></i> Comparative Medicine Database
        </h1>
        
        <!-- Medicine Search Section -->
        <div class="card border-primary mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-search"></i> Search Medicines
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <label for="medicineSelect" class="form-label">Select a Medicine:</label>
                        <select class="form-select" id="medicineSelect" onchange="onMedicineSelect()">
                            <option value="">Select a medicine...</option>
                            <option value="aspirin">Aspirin (analgesic) - £4.99</option>
                            <option value="ibuprofen">Ibuprofen (analgesic) - £5.49</option>
                            <option value="acetaminophen">Acetaminophen (analgesic) - £3.99</option>
                            <option value="vitamin_c">Vitamin C (vitamin) - £6.99</option>
                            <option value="multivitamin">Daily Multivitamin (vitamin) - £8.99</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="searchInput" class="form-label">Search:</label>
                        <input type="text" class="form-control" id="searchInput" placeholder="Type to search..." autocomplete="off">
                    </div>
                </div>
            </div>
        </div>

        <!-- Medicine Details Section -->
        <div id="medicineDetailsSection" class="card border-success mb-4" style="display: none;">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="fas fa-pills"></i> Medicine Information & Purchase
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- Medicine Basic Info -->
                    <div class="col-md-6">
                        <div class="medicine-info-card">
                            <h6 class="text-success fw-bold">Basic Information</h6>
                            <table class="table table-sm table-borderless">
                                <tr>
                                    <td><strong>Medicine Name:</strong></td>
                                    <td id="medicineName" class="text-primary fw-bold">-</td>
                                </tr>
                                <tr>
                                    <td><strong>Category:</strong></td>
                                    <td id="medicineCategory" class="text-muted">-</td>
                                </tr>
                                <tr>
                                    <td><strong>For Species:</strong></td>
                                    <td id="medicineSpecies" class="text-info">-</td>
                                </tr>
                                <tr>
                                    <td><strong>Recommended Dosage:</strong></td>
                                    <td id="medicineDosage" class="text-dark">-</td>
                                </tr>
                                <tr>
                                    <td><strong>Price:</strong></td>
                                    <td id="medicinePrice" class="text-success fw-bold fs-5">£-</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Purchase Section -->
                    <div class="col-md-6">
                        <div class="purchase-section border rounded p-3 bg-light">
                            <h6 class="text-success fw-bold mb-3">
                                <i class="fas fa-shopping-cart"></i> Add to Cart
                            </h6>
                            
                            <div class="mb-3">
                                <label for="quantity" class="form-label">Quantity:</label>
                                <div class="input-group" style="max-width: 150px;">
                                    <button class="btn btn-outline-secondary" type="button" onclick="decreaseQuantity()">-</button>
                                    <input type="number" class="form-control text-center" id="quantity" value="1" min="1" max="10">
                                    <button class="btn btn-outline-secondary" type="button" onclick="increaseQuantity()">+</button>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between">
                                    <span>Item Total:</span>
                                    <span id="itemTotal" class="fw-bold text-success">£0.00</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span>Delivery Fee:</span>
                                    <span class="text-muted">£2.99</span>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between">
                                    <span class="fw-bold">Total:</span>
                                    <span id="totalWithDelivery" class="fw-bold text-success fs-5">£2.99</span>
                                </div>
                            </div>
                            
                            <button class="btn btn-success w-100" onclick="addToCartNew()">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Close Button -->
                <div class="text-end mt-3">
                    <button class="btn btn-outline-secondary" onclick="closeMedicineDetails()">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Medicine database with fixed prices
        const medicines = {
            aspirin: {
                id: 'aspirin',
                name: 'Aspirin',
                category: 'Analgesic',
                species: 'Human',
                dosage: '325-650mg every 4-6 hours',
                price: 4.99,
                notes: 'Over-the-counter pain reliever and anti-inflammatory.'
            },
            ibuprofen: {
                id: 'ibuprofen',
                name: 'Ibuprofen',
                category: 'Analgesic',
                species: 'Human',
                dosage: '200-400mg every 6-8 hours',
                price: 5.49,
                notes: 'Non-steroidal anti-inflammatory drug (NSAID).'
            },
            acetaminophen: {
                id: 'acetaminophen',
                name: 'Acetaminophen',
                category: 'Analgesic',
                species: 'Human',
                dosage: '500-1000mg every 6-8 hours',
                price: 3.99,
                notes: 'Pain reliever and fever reducer.'
            },
            vitamin_c: {
                id: 'vitamin_c',
                name: 'Vitamin C',
                category: 'Vitamin',
                species: 'Human',
                dosage: '65-90mg daily',
                price: 6.99,
                notes: 'Essential vitamin for immune system support.'
            },
            multivitamin: {
                id: 'multivitamin',
                name: 'Daily Multivitamin',
                category: 'Vitamin',
                species: 'Human',
                dosage: '1 tablet daily',
                price: 8.99,
                notes: 'Complete daily vitamin and mineral supplement.'
            }
        };

        // Function to handle medicine selection
        function onMedicineSelect() {
            const selectElement = document.getElementById('medicineSelect');
            const selectedValue = selectElement.value;
            
            if (selectedValue && medicines[selectedValue]) {
                showMedicineDetails(medicines[selectedValue]);
            }
        }

        // Function to show medicine details with FIXED prices
        function showMedicineDetails(medicine) {
            // Update basic information
            document.getElementById('medicineName').textContent = medicine.name;
            document.getElementById('medicineCategory').textContent = medicine.category;
            document.getElementById('medicineSpecies').textContent = medicine.species;
            document.getElementById('medicineDosage').textContent = medicine.dosage;
            
            // Set FIXED price (no random generation)
            const price = medicine.price;
            document.getElementById('medicinePrice').textContent = `£${price.toFixed(2)}`;
            
            // Update totals
            updateTotals(price);
            
            // Store medicine data
            window.selectedMedicineData = medicine;
            
            // Show the section
            document.getElementById('medicineDetailsSection').style.display = 'block';
            
            // Scroll to the section
            document.getElementById('medicineDetailsSection').scrollIntoView({ 
                behavior: 'smooth' 
            });
        }

        function increaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            let quantity = parseInt(quantityInput.value);
            if (quantity < 10) {
                quantityInput.value = quantity + 1;
                updateTotals();
            }
        }

        function decreaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            let quantity = parseInt(quantityInput.value);
            if (quantity > 1) {
                quantityInput.value = quantity - 1;
                updateTotals();
            }
        }

        function updateTotals(basePrice = null) {
            const quantity = parseInt(document.getElementById('quantity').value) || 1;
            let price = basePrice;
            
            if (!price) {
                const priceText = document.getElementById('medicinePrice').textContent;
                price = parseFloat(priceText.replace('£', '')) || 0;
            }
            
            const itemTotal = price * quantity;
            const deliveryFee = 2.99;
            const total = itemTotal + deliveryFee;
            
            document.getElementById('itemTotal').textContent = `£${itemTotal.toFixed(2)}`;
            document.getElementById('totalWithDelivery').textContent = `£${total.toFixed(2)}`;
        }

        function addToCartNew() {
            if (!window.selectedMedicineData) {
                alert('Please select a medicine first!');
                return;
            }
            
            const quantity = parseInt(document.getElementById('quantity').value) || 1;
            const medicine = window.selectedMedicineData;
            
            // Show success message
            const toast = document.createElement('div');
            toast.className = 'alert alert-success alert-dismissible fade show position-fixed';
            toast.style.cssText = 'top: 20px; right: 20px; z-index: 1050; min-width: 300px;';
            toast.innerHTML = `
                <i class="fas fa-check-circle"></i> <strong>${medicine.name}</strong> added to cart!
                <br><small>Quantity: ${quantity} | Price: £${(medicine.price * quantity).toFixed(2)}</small>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(toast);
            
            // Auto-remove toast after 4 seconds
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 4000);
        }

        function closeMedicineDetails() {
            document.getElementById('medicineDetailsSection').style.display = 'none';
            document.getElementById('quantity').value = 1;
            document.getElementById('medicineSelect').value = '';
            document.getElementById('searchInput').value = '';
        }

        // Clear fields on page load
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('medicineSelect').value = '';
            document.getElementById('searchInput').value = '';
            document.getElementById('medicineDetailsSection').style.display = 'none';
            
            // Add quantity input event listener
            const quantityInput = document.getElementById('quantity');
            if (quantityInput) {
                quantityInput.addEventListener('input', updateTotals);
            }
        });
    </script>
</body>
</html>